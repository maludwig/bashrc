# User specific aliases and functions
# Bash aliases
alias ll='ls -lah'
alias l='ls --color'
alias w='cd /var/www/html'
alias x='cd /var/www/html/wp-content/themes/x-child'
function md { mkdir $1; cd $1; }
alias ..='cd ..'
alias cd..='cd ..'

# Log aliases
alias tail-httpd="tail -n20 /var/log/httpd/error_log"

# MySQL aliases
alias mq="mysql -uroot -p'$RDSPASS'"
alias mqd="mysqldump -uroot -p'$RDSPASS'"
alias mq-rds="mysql -uroot -p'$RDSPASS' -h'$RDSHOST'"
alias mqd-rds="mysqldump -uroot -p'$RDSPASS' -h'$RDSHOST'"

# Git aliases
alias gits='git status'
alias gita='git add -A'
alias gitan='git add -An'
alias gitc='git commit -m'
alias gitch='git checkout'
alias gitchb='git checkout -b'
alias gitpush='git push origin master'
alias gitpull='git pull origin master'
alias gitgraph='git log --graph --oneline --decorate --date=relative --all --color'
function gitacp { git add -A; git commit -m "$1"; git push origin master; }
function gitcp { git commit -m "$1" ; git push origin master; }

# Mercurial aliases
function hg-clone { hg clone ssh://hg@ss2:/$1; }
alias hgs='hg st'
alias hga='hg add'
alias hgan='hg add -n'
alias hgc='hg commit -m'
alias hgch='hg update -c'
alias hgchb='hg branch'
alias hgpush='hg push'
alias hgpull='hg pull'

# Package Manager aliases
alias ag='apt-get -y install'
alias ags='apt-get -s install'
alias agli='apt --installed list'
alias aglg='apt list | grep'
alias yumi='yum -y install'
alias yumlg='yum list | grep'
alias yumu='yum -y update'
alias pipi='pip install'
alias pipu='pip install --upgrade'
alias piplg='pip search'

# Service aliases
function sr { service $1 restart; }
alias srh='sr httpd'
alias sra='sr apache2'
alias srm='sr mysqld'
alias srn='sr neo4j-service'
alias srs='sr smb'
alias sall='service --status-all'

alias sc='systemctl'
function scr { systemctl restart $1; }
alias scrh='scr httpd'
alias scra='scr apache2'
alias scrm='scr mysqld'
alias scrn='scr neo4j-service'
alias scrs='scr smb'

function scs { systemctl status $1; }
alias scsh='scs httpd'
alias scsa='scs apache2'
alias scsm='scs mysqld'
alias scsn='scs neo4j-service'
alias scss='scs smb'
alias scall='systemctl'

# Common functions 
alias sync-time='ntpdate pool.ntp.org'
alias encrypt-file='gpg --cipher-algo AES256 --symmetric $1'
alias decrypt-file='gpg'
alias regex='~/bashrc/regex.py'
alias edit-bashrc='cd ~/bashrc; vim'
function ask-yes { echo -ne "${CYELLOW} $1 [Y/n]: ${CDEFAULT}"; read ASK; export ASK=${ASK:-y}; }
function setup-ssh-login { mkdir ~/.ssh; chmod 700 ~/.ssh; cd ~/.ssh; cp ~/bashrc/ssh/mlkey.pub ./ ; cat mlkey.pub >> authorized_keys; chmod 600 *; cd; }
function setup-ssh-creds {
	if [ ! -d "~/.ssh" ]; then
		setup-ssh-login
	fi
	cd ~/.ssh
	cp ~/bashrc/ssh/mlkey.pem.gpg ./
	decrypt-file mlkey.pem.gpg
	ask-yes "Set mlkey as id_rsa?"
	if [ "$ASK" != "n" ]; then
		cp mlkey.pem id_rsa
	fi
	ask-yes "Set gmail as github key?"
	if [ "$ASK" != "n" ]; then
		cp $BASHRC_DIR/ssh/gmail.pem.gpg ./
		decrypt-file gmail.pem.gpg
		if grep -L "github.com" config; then
			echo "config already contains github entry, skipping"
		else
			cat $BASHRC_DIR/ssh/config-git >> ~/.ssh/config
		fi
		cd $BASHRC_DIR
		git remote set-url origin git@github.com:maludwig/bashrc.git
		cd ~/.ssh
	fi
	rm *.gpg
	chmod 700 .
	chmod 600 *
}
function date-today { echo $(date +%F); }
function date-second { echo $(date +%F_%T); }
 
# Login aliases
alias suw='sudo su www-data'

